<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>
</head>
<body>
    <script>
        function increase(number){
            //프로미스 객체 생성
            //비동기 처리가 성공하면 resolve 실행
            //비동기 처리가 실패하면 reject 함수 호출
            const promise = new Promise((resolve, reject) => {
                setTimeout(() => {
                    const result = number + 10;
                    if(result >= 50) {
                        const e = new Error('NumberTooBig');
                        return reject(e);
                    }

                    resolve(result);
                }, 1000);
            });

            return promise;
        }

        increase(0)
            .then(number => {
                console.log(number);
                return increase(number);
            })
            .then(number => {
                console.log(number);
                return increase(number);
            })
            .then(number => {
                console.log(number);
                return increase(number);
            })
            .then(number => {
                console.log(number);
                return increase(number);
            })
            //에러 발생 시에는 catch로 잡을 수 있다.
            .catch(e => {
                console.log(e);
            })
            
    </script>
</body>
</html>